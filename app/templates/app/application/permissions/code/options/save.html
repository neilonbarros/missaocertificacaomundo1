{% load i18n %}
{% if type_page == 'edit' %}
    <li>
        <a class="dropdown-item"
            href="#"
            id="buttonPermissionsSaveId"
            name="buttonPermissionsSaveName">
            <span class="spinner-border spinner-border-sm d-none" role="status" aria-hidden="true"></span>
            <script nonce="{{request.csp_nonce}}">

                document.addEventListener("DOMContentLoaded", function () {
                document.getElementById("buttonPermissionsSaveId")
                    .addEventListener("click", function doThings() {
                            const thisId = this.id;
                            const link = document.getElementById(thisId);
                            const linkSpan = link.getElementsByTagName("span")[0];

                            linkSpan.classList.remove("d-none");
                            document.getElementById("optionsLoadingId").classList.remove("d-none");
                            const form = document.getElementById(thisId.replace("button", "form"));
                            form.submit();
                        }
                    );
                });
            </script>
            {% translate "save"|title %}
        </a>
    </li>
{% endif %}
